<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
			 xmlns:converter="clr-namespace:LogService.Maui.Converter"
			 xmlns:loc="clr-namespace:LogService.Client.Localisation;assembly=LogService.Client.Localisation"
			 x:Class="LogService.Maui.View.LoginView"
			 xmlns:local="clr-namespace:LogService.Maui.View"
			 Title="Profiles">

	<ContentPage.ToolbarItems>
		<ToolbarItem Text="New"
			Order="Primary"
			Priority="0"
			IconImageSource="{x:DynamicResource IconAdd}"
			Command="{Binding CreateProfileCommand}"/>
	</ContentPage.ToolbarItems>

	<ContentPage.Content>
		<Grid>
			<CollectionView ItemsSource="{Binding LoginProfiles}">
				<CollectionView.ItemTemplate>
					<DataTemplate>
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="Auto" />
								<ColumnDefinition Width="Auto" />
							</Grid.ColumnDefinitions>
							<Button 
								Grid.Column="0" Text="{Binding Profile.Name}"
								Margin="1" BackgroundColor="#00375a" TextColor="#ffffff"
								Command="{Binding BindingContext.LoginProfileCommand, Source={RelativeSource AncestorType={x:Type local:LoginView}}}" CommandParameter="{Binding .}" />

							<Button
								Grid.Column="1" Margin="1" Padding="0"
								HeightRequest="36" WidthRequest="36"
								BackgroundColor="#00375a"
								ImageSource="{StaticResource IconEdit}"
								Command="{Binding BindingContext.EditProfileCommand, Source={RelativeSource AncestorType={x:Type local:LoginView}}}" CommandParameter="{Binding .}" />

							<Button
								Grid.Column="2" Margin="1" Padding="0"
								HeightRequest="36" WidthRequest="36"
								BackgroundColor="#00375a"
								ImageSource="{StaticResource IconDelete}"
								Command="{Binding BindingContext.DeleteProfileCommand, Source={RelativeSource AncestorType={x:Type local:LoginView}}}" CommandParameter="{Binding .}" />
						</Grid>
					</DataTemplate>
				</CollectionView.ItemTemplate>
			</CollectionView>
		</Grid>
	</ContentPage.Content>
</ContentPage>